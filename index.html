<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>EGAT Overtime – v18.13</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="css/style.css" />
  <script>(function(){var KEY='ot_session_auth_v1';if(sessionStorage.getItem(KEY)!=='ok'){location.replace('login.html?v=1813');}})();</script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.3/dist/jspdf.plugin.autotable.min.js"></script>
  <script src="js/app.js" defer></script>
</head>
<body>
  <h1 class="main-header">Overtime Calculator</h1>
  <section id="view-dashboard" class="active">
    <div class="cal-header">
      <button id="btn-prev" type="button">◀</button>
      <div id="label-month" class="title"></div>
      <button id="btn-next" type="button">▶</button>
    </div>
    <div class="stat-row">
      <div class="stat-card"><div class="stat-title">ชั่วโมงเดือนนี้</div><div id="hoursTotal" class="big-number">0</div></div>
      <div class="stat-card"><div class="stat-title">เงินเดือนนี้ (บาท)</div><div id="moneyTotal" class="big-number">0</div></div>
    </div>
    <div class="card quota-card">
      <div class="row" style="margin-bottom:8px"><div class="title">โควตาเดือนนี้</div>
        <div class="muted"><span id="quotaUsed">0</span>/<span id="quotaTotal">0</span> ชม. <span id="quotaRemainWrap">(คงเหลือ <b id="quotaRemain">0</b>)</span></div>
      </div>
      <div class="quota-bar"><div id="quotaFill"></div></div>
    </div>
    <div class="card chart-card"><h3 style="margin:0 0 8px 0">กราฟรายวัน (สูงแบบกะทัดรัด)</h3><div class="chart-wrap"><canvas id="dailyChart"></canvas></div></div>
    <div class="cal-legend">
      <span class="dot low"></span> 0–5
      <span class="dot mid" style="background:#DAA520"></span> 6–10
      <span class="dot high" style="background:#DB7093"></span> 11–20
      <span class="dot weekend" style="background:#CD5C5C;margin-left:12px"></span> ส-อา
    </div>
    <div id="cal-grid" class="cal-grid"></div>
  </section>
  <section id="view-record">
    <h2>บันทึก OT</h2>
    <label>วันที่ <input id="in-date" type="date"></label>
    <div class="card grid2" style="align-items:center">
      <div><div class="muted small">โควตาเดือนนี้ (ชม.)</div><div id="rec-quota" class="record-badge">0</div></div>
      <div class="right"><div class="muted small">ค่าแรงต่อชั่วโมง (จากตั้งค่า)</div><div id="rec-rate" class="record-badge">0</div></div>
    </div>
    <div class="record-hours">
      <label>ชั่วโมง 1× <input id="h1" type="number" step="0.5" value="0"></label>
      <label>ชั่วโมง 1.5× <input id="h15" type="number" step="0.5" value="0"></label>
      <label>ชั่วโมง 2× <input id="h2" type="number" step="0.5" value="0"></label>
      <label>ชั่วโมง 3× <input id="h3" type="number" step="0.5" value="0"></label>
    </div>
    <div class="row">
      <button id="btn-save" type="button">บันทึก</button>
      <button id="btn-clear" type="button" class="ghost">เคลียร์ชั่วโมง</button>
      <button id="btn-delete" type="button" class="danger">ลบข้อมูลวันที่นี้</button>
    </div>
  </section>
  <section id="view-report">
    <h2>รายงาน</h2>
    <div class="row" style="margin-bottom:8px">
      <label>เลือกปี <select id="report-year"></select></label>
      <div><button id="btn-export-pdf" type="button">Export PDF</button></div>
    </div>
    <div class="stat-row" style="margin-top:4px">
      <div class="stat-card"><div class="stat-title">ชั่วโมงรวมปีนี้</div><div id="report-hours-year" class="big-number">0</div></div>
      <div class="stat-card"><div class="stat-title">เงินรวมปีนี้ (บาท)</div><div id="report-money-year" class="big-number">0</div></div>
    </div>
    <div class="card chart-card">
      <h3 style="margin:0 0 8px 0">กราฟรายเดือน (ชั่วโมง)</h3>
      <div class="chart-wrap"><canvas id="reportChart"></canvas></div>
    </div>
  </section>
  <section id="view-settings">
    <h2>ตั้งค่า</h2>
    <div class="card grid2"><label>โควตาเริ่มต้นรายเดือน (ชั่วโมง)<input id="default-monthly-quota" type="number" placeholder="เช่น 30"></label><button id="btn-save-default-quota" type="button">บันทึกโควตาเริ่มต้น</button></div>
    <div class="card grid2"><label>ค่าแรงต่อชั่วโมง (ค่าเริ่มต้น)<input id="default-hourly-rate" type="number" placeholder="เช่น 120"></label><button id="btn-save-default-rate" type="button">บันทึกค่าแรงเริ่มต้น</button></div>
    <div class="card"><label><input id="auto-reset-toggle" type="checkbox" checked> รีเซ็ตช่องเป็น 0 และวันที่วันนี้อัตโนมัติหลังบันทึก</label></div>
    <div class="row"><button id="btn-export" type="button">Export JSON</button><input id="import-file" type="file"><button id="btn-import" type="button">Import JSON</button><button id="btn-logout" type="button" class="danger">ออกจากระบบ</button></div>
  </section>
  <div id="modal-backdrop" class="modal-backdrop" hidden></div>
  <div id="modal" class="modal" hidden><div class="modal-card"><h3>ยืนยันการบันทึก</h3><div id="modal-content" class="modal-content"></div><div class="row" style="margin-top:10px"><button id="modal-confirm" type="button">ยืนยัน</button><button id="modal-cancel" type="button" class="ghost">ยกเลิก</button></div></div></div>
  <footer id="footer-tabs"><button class="tab active" data-view="dashboard" type="button">แดชบอร์ด</button><button class="tab" data-view="record" type="button">บันทึก</button><button class="tab" data-view="report" type="button">รายงาน</button><button class="tab" data-view="settings" type="button">ตั้งค่า</button></footer>
</body>
</html>
